<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Seek-Configurações</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/config.css" />
  <link rel="icon" href="img/logoSeekk.svg" type="image/svg+xml" />
  <link rel="shortcut icon" href="img/logoSeekk.svg" type="image/svg+xml" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="script/Graficos.js"></script>

</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SLCTJL00KV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "G-SLCTJL00KV");
</script>

<body id="todo">
  <div id="barra-acessibilidade" class="divativacaobarradeacessibilidade">
    <button id="botaobarra" onclick="ativarbarra()" class="botaoativacaobarra">
      <img src="img/barra/icon.svg" alt="símbolo da onu" />
    </button>
  </div>

  <div id="barra" class="divbarradeacessibilidade">
    <button onclick="desativarbarra()" class="botaoativacaobarra">
      <img src="img/barra/icon.svg" alt="símbolo da onu" />
    </button>

    <button onclick="zoommenos()" class="funcaoesbarradeacessibilidade">
      <img src="img/barra/lupa-.svg" alt="Lupa com um - no centro" />
    </button>

    <button onclick="zoommais()" class="funcaoesbarradeacessibilidade">
      <img src="img/barra/lupa+.svg" alt="Lupa com um + no centro" />
    </button>

    <button onclick="ModoEscuro()" class="funcaoesbarradeacessibilidade">
      <img src="img/barra/luabarra.svg" alt="Lua" />
    </button>

    <button onclick="ModoClaro()" class="funcaoesbarradeacessibilidade">
      <img src="img/barra/solbarra.svg" alt="Sol" />
    </button>

    <button onclick="desativaeativavlibras()" class="funcaoesbarradeacessibilidade">
      <img src="img/barra/iconvlibras.svg" alt="vlibras" />
    </button>

    <img id="logodafatecdabarradeacessibilidade" src="img/Logofatec.svg" alt="Logo da fatec" />
  </div>

  <header class="inicio" id="header">
    <script src="script/criar_header.js" defer></script>
    <script src="script/conexao_api/barra_pesquisa.js" defer></script>
  </header>

  <main>
    <div id="caixadenotificacaofazerlogin" class="caixadenotificacaofazerlogin">
      <h2>Não foi possível continuar</h2>
      <p>Você precisa estar logado para acessar esta página.</p>
      <div class="actions">
        <span onclick="fecharnotificacao()" id="cancelarnotificacaofazerlogin" class="btn-cancel">Cancelar</span>
        <span id="botaofazerloginconfirmar" class="btn-confirm"><a href="login.html">fazer login</a></span>
      </div>
    </div>

    <h1 class="ConM">Configurações</h1>
    <div class="divconfigmain">
      <div class="menuconfigoracoes">
        <ul id="listaconfig">
          <li class="lidivconfig">
            <button onclick="privacidade()" id="selecionado" class="PriM textoli">
              Privacidede
            </button>
          </li>
          <li class="lidivconfig">
            <button onclick="notificaacoes()" class="NotM textoli">
              Notificações
            </button>
          </li>
          <li class="lidivconfig">
            <button onclick="informacoesuser()" class="InfM textoli">
              Informações Usuário
            </button>
          </li>
          <li class="lidivconfig">
            <button class="EmaM textoli">Email/Senha</button>
          </li>

          <li class="lidivconfig">
            <button onclick="infoestatistica()" class="EstM textoli">
              Estatísticas
            </button>
          </li>
        </ul>
      </div>

      <div class="containerconfig">
        <div id="privacidadeconfig" class="privacidadeconfig">
          <h2 class="PriM">Privacidade</h2>

          <div class="visibilidadedoperfil fontetexto gapentreopcoesepergunta">
            <div class="pergunta">
              <p class="Pper1">
                Deseja que todos possam ver seu perfil na área de busca ?
              </p>
            </div>
            <div class="opcaoprivacidade">
              <form id="formbusca" data-pref="exibir_na_busca">
                <input type="radio" name="visibilidade" id="buscasim" value="1" />
                <label for="buscasim" class="OS">Sim</label>

                <input type="radio" name="visibilidade" id="buscanao" value="0" />
                <label for="buscanao" class="ON">Não</label>
              </form>
            </div>
          </div>
          <div class="visibilidadedosprejetos fontetexto gapentreopcoesepergunta">
            <div class="pergunta">
              <p class="Pper2">
                Deseja que todos possam ver seus projetos na área de busca ?
              </p>
            </div>
            <div class="opcaoprivacidade">
              <form id="formfeed" data-pref="exibir_no_feed">
                <input type="radio" name="visibilidade" id="feedsim" value="1" />
                <label for="feedsim" class="OS">Sim</label>

                <input type="radio" name="visibilidade" id="feednao" value="0" />
                <label for="feednao" class="ON">Não</label>
              </form>
            </div>
          </div>
          <div class="visibilidadedoscursos fontetexto gapentreopcoesepergunta">
            <div class="pergunta">
              <p class="Pper3">
                Deseja que todos possam ver seus cursos na área de busca ?
              </p>
            </div>
            <div class="opcaoprivacidade">
              <form id="formcursofeed" data-pref="exibir_cursos_no_feed">
                <input type="radio" name="visibilidade" id="cursosim" value="1" />
                <label for="cursosim" class="OS">Sim</label>

                <input type="radio" name="visibilidade" id="cursosnao" value="0" />
                <label for="cursosnao" class="ON">Não</label>
              </form>
            </div>
          </div>
          <div class="visibilidadedoemaildousuario fontetexto gapentreopcoesepergunta">
            <div class="pergunta">
              <p class="Pper4">Deseja que todos possam ver os posts que voce curtiu?</p>
            </div>
            <div class="opcaoprivacidade">
              <form id="formcurtidas" data-pref="exibir_likes">
                <input type="radio" name="visibilidade" id="likessim" value="1" />
                <label for="likessim" class="OS">Sim</label>

                <input type="radio" name="visibilidade" id="likesnao" value="0" />
                <label for="likesnao" class="ON">Não</label>
              </form>
            </div>
          </div>
        </div>

        <div id="notificacoesconfig" class="notificacoesconfig">
          <h2 class="NotM">Notificações</h2>

          <div class="infonotificacoesconfig fontetexto gapentreopcoesepergunta">
            <p class="Pper5">
              Deseja receber um resumo das suas notificações por e-mail?
            </p>
            <div class="opcaoprivacidade">
              <form action="">
                <input type="radio" name="visibilidade" id="visivel" value="visivel" />
                <label for="visivel" class="OS">Sim</label>

                <input type="radio" name="visibilidade" id="invisivel" value="invisivel" />
                <label for="invisivel" class="ON">Não</label>
              </form>
            </div>
          </div>
          <div class="infonotificacoesconfig fontetexto gapentreopcoesepergunta">
            <p class="Pper6">
              Deseja receber uma notificação ao receber um like em seus
              projetos?
            </p>
            <div class="opcaoprivacidade">
              <form id="formlikes" data-pref="receber_likes">
                <input type="radio" name="visibilidade" id="likessim" value="1" />
                <label for="likessim" class="OS">Sim</label>

                <input type="radio" name="visibilidade" id="likesnao" value="0" />
                <label for="likesnao" class="ON">Não</label>
              </form>
            </div>
          </div>
          <div class="infonotificacoesconfig fontetexto gapentreopcoesepergunta">
            <p class="Pper7">
              Deseja ser notificado quando comentarem em seus projetos?
            </p>
            <div class="opcaoprivacidade">
              <form id="formcomentarios" data-pref="receber_comentarios">
                <input type="radio" name="visibilidade" id="comentariosim" value="1" />
                <label for="comentariosim" class="OS">Sim</label>

                <input type="radio" name="visibilidade" id="comentarionao" value="0" />
                <label for="comentarionao" class="ON">Não</label>
              </form>
            </div>
          </div>
          <div class="infonotificacoesconfig fontetexto gapentreopcoesepergunta">
            <p class="Pper8">
              Deseja receber notificação quando ouver um novo seguidor
            </p>
            <div class="opcaoprivacidade">
              <form id="formseguidores" data-pref="receber_seguidores">
                <input type="radio" name="visibilidade" id="seguidorsim" value="1" />
                <label for="seguidorsim" class="OS">Sim</label>

                <input type="radio" name="visibilidade" id="seguidornao" value="0" />
                <label for="seguidornao" class="ON">Não</label>
              </form>
            </div>
          </div>
          <div class="infonotificacoesconfig fontetexto gapentreopcoesepergunta">
            <p class="Pper9">
              Deseja receber notificação quando ouver um login em sua conta
            </p>
            <div class="opcaoprivacidade">
              <form id="formnotificacoeslogin" data-pref="receber_login">
                <input type="radio" name="visibilidade" id="loginsim" value="1" />
                <label for="loginsim" class="OS">Sim</label>

                <input type="radio" name="visibilidade" id="loginnao" value="0" />
                <label for="loginnao" class="ON">Não</label>
              </form>
            </div>
          </div>
        </div>

        <div id="informacoesousuario" class="informacoesousuario">
          <h2 class="InfM">Informações do Usuário</h2>

          <form id="forminfouser" action="">
            <div class="form-group">
              <label for="Cidade" class="CidP">Cidade/País</label>
              <input type="text" class="form-control CidadeForm" id="CidadeForm"
                placeholder="Digite o nome da sua cidade" />
              <p class="erroinputconf">
                Este campo é obrigatório. Por favor, informe o nome da sua
                cidade.
              </p>
            </div>
            <div class="form-group">
              <label for="Cargo" class="Carg">Cargo</label>
              <input type="text" class="form-control CargoForm" id="CargoForm" placeholder="cargodousuario" />
              <p class="erroinputconf">
                Este campo é obrigatório. Por favor, informe seu cargo.
              </p>
            </div>
            <div class="form-group">
              <label for="Perfil" class="Url">URL do perfil</label>
              <input type="url" class="form-control" id="URLForm" placeholder="https://www.seek.com/perfil-usuário" />
              <p class="erroinputconf">
                Este campo é obrigatório. Por favor, informe a URL do seu
                perfil.
              </p>
            </div>
            <div class="form-group">
              <label for="email" class="SEma">Seu e-mail</label>
              <input type="email" class="form-control" id="EmailForm" placeholder="teste@gmail.com" />
              <p class="erroinputconf">
                Este campo é obrigatório. Por favor, informe um e-mail válido.
              </p>
            </div>
            <div class="form-group">
              <label for="Senha" class="Senh">Senha</label>
              <input type="password" class="form-control" id="SenhaForm" placeholder="********" />
              <p class="erroinputconf">
                Este campo é obrigatório. Por favor, informe uma senha.
              </p>
            </div>
            <div class="form-group">
              <label for="NomeDeUsuario" class="Nome">Nome de Usuário</label>
              <input type="text" class="form-control NomeForm" id="NomeForm" placeholder="Nome do Usuário" />
              <p class="erroinputconf">
                Este campo é obrigatório. Por favor, informe um nome de
                usuário.
              </p>
            </div>
          </form>

          <script>
            fetch(`http://localhost:4500/usuarios/${usuario.id}`)
              .then((response) => response.json())
              .then((data) => {
                if (data.length === 0) {
                  alert("Usuário não encontrado!");
                  return;
                }

                const user = data[0]; // <- Aqui está o segredo!

                console.log("Usuário recebido:", user);

                document.getElementById("CidadeForm").value =
                  user.cidade_pais || "";
                document.getElementById("CargoForm").value = user.cargo || "";
                document.getElementById("NomeForm").value = user.nome || "";
                document.getElementById("EmailForm").value = user.email || "";
                document.getElementById("SenhaForm").value = ""; // segurança: não mostrar senha
                document.getElementById("URLForm").value = ""; // ajuste se tiver campo real para URL
              })
              .catch((error) => {
                console.error("Erro ao buscar dados do usuário:", error);
              });
          </script>

          <div class="infonotificacoesconfig fontetexto gapentreopcoesepergunta">
            <p class="Pper10">Utilizar barra de acessibilidade</p>
            <div class="opcaoprivacidade">
              <form action="">
                <input type="radio" name="barraacessibilidade" id="barraacessibilidadevisivel" value="true" />
                <label for="barraacessibilidadevisivel" class="OS">Sim</label>

                <input type="radio" name="barraacessibilidade" id="barraacessibilidadeinvisivel" value="false" />
                <label for="barraacessibilidadeinvisivel" class="ON">Não</label>
              </form>
            </div>
          </div>

          <div class="infonotificacoesconfig fontetexto gapentreopcoesepergunta">
            <p class="Pper11">
              Não permitir que terceiros incorporem seu conteúdo em outros
              sites?
            </p>
            <div class="opcaoprivacidade">
              <form action="">
                <input type="radio" name="visibilidade" id="visivel" value="visivel" />
                <label for="visivel" class="OS">Sim</label>

                <input type="radio" name="visibilidade" id="invisivel" value="invisivel" />
                <label for="invisivel" class="ON">Não</label>
              </form>
            </div>
          </div>

          <div id="alinhar">
            <div id="divsalvarconfig">
              <button id="salvarconfig" class="ConSA">
                Salvar alterações
              </button>
            </div>
          </div>

          <button class="eXcluirconta" onclick="abrirnotificacaoexcluirconta()">
            Excluir conta
          </button>

          <div id="caixadenotificacaoexcluirconta" class="caixadenotificacaoexcluirconta">
            <h2>Você tem certeza?</h2>
            <p>
              Isso irá excluir sua conta permanentemente, essa ação não pode
              ser desfeita.
            </p>
            <div class="actions">
              <span onclick="cancelarnotificacaoexcluirconta()" id="cancelarnotificacaoexcluirconta"
                class="btn-cancel">cancelar</span>
              <span id="botaoexcluircontaconfirmar" class="btn-confirm">confirmar</span>
            </div>
          </div>

          <div id="verificacaoContainer" style="display: none; margin-top: 1rem">
            <p>
              Enviamos um codigo ao email associado a essa conta para a
              Exclusão da conta
            </p>
            <label for="codigoVerificacao">Digite o código enviado ao seu e-mail:</label>
            <input type="text" id="codigoVerificacao" placeholder="Ex: 123456" />
            <button type="button" id="verificarCodigoBtn">
              Verificar Código
            </button>
          </div>
        </div>

        <div id="infoestatistica" class="infoestatistica">

          <div class="conteudograficos">
            <div class="graficoPizza">
              <canvas id="pizzaCanvas"></canvas>
            </div>

            <div class="categoriasdiv">
              <h2>Tags mais usadas por você:</h2>
              <ul id="minhaLegenda">
                <li>Designer</li>
                <li>Empresas</li>
                <li>Artistas</li>
                <li>Fotográfos</li>
                <li>Ilustradores</li>
                <li>Designers Gráficos</li>
              </ul>
            </div>

          </div>
        </div>
      </div>
    </div>

    <div id="ativaredasativarvlibras" class="ativaredasativarvlibras">
      <div vw class="enabled">
        <div vw-access-button class="active"></div>
        <div vw-plugin-wrapper>
          <div class="vw-plugin-top-wrapper"></div>
        </div>
      </div>
      <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
      <script>
        new window.VLibras.Widget("https://vlibras.gov.br/app");
      </script>
    </div>


  </main>

  <footer id="footer">
    <script src="script/criar_footer.js" defer></script>
  </footer>


  <!-- <script src="script/cautela.js"></script>   -->
  <script src="script/user_logado.js"></script>
  <script src="script/config.js"></script>
  <script src="script/acessibilidade.js"></script>
  <script src="script/script.js"></script>
  <script src="script/tema.js"></script>
  <!-- <script src="script/traducao.js"></script> -->
  <script src="script/conexao_api/verificar_preferencias_notificacaos.js"></script>
  <script src="script/conexao_api/verificar_preferencias_privacidade.js"></script>
  <script src="script/verificar_token.js"></script>


</body>

</html>